{% extends "base.html" %}
{% block title %}{{ 'Editar produto' if produto else 'Novo produto' }} · MetriFy{% endblock %}
{% block header_title %}{{ 'Editar produto' if produto else 'Cadastrar produto' }}{% endblock %}

{% block content %}
<div class="card-soft">
  <form method="post" class="row g-3">
    <div class="col-12 col-md-6">
      <label class="form-label small mb-1">Nome do produto</label>
      <input type="text" name="nome" class="form-control" required value="{{ produto.nome if produto else '' }}">
    </div>
    <div class="col-12 col-md-3">
      <label class="form-label small mb-1">SKU</label>
      <input type="text" name="sku" class="form-control" value="{{ produto.sku if produto else '' }}">
    </div>
    <div class="col-6 col-md-3">
      <label class="form-label small mb-1">Curva</label>
      <input type="text" name="curva" class="form-control" value="{{ produto.curva if produto and produto.curva else '' }}" disabled>
    </div>

    <div class="col-6 col-md-3">
      <label class="form-label small mb-1">Custo unitário (R$)</label>
      <input type="number" step="0.01" name="custo_unitario" class="form-control" value="{{ produto.custo_unitario if produto else 0 }}">
    </div>
    <div class="col-6 col-md-3">
      <label class="form-label small mb-1">Preço sugerido (R$)</label>
      <input type="number" step="0.01" name="preco_venda_sugerido" class="form-control" value="{{ produto.preco_venda_sugerido if produto else 0 }}">
    </div>

    {% if produto %}
      <div class="col-6 col-md-3">
        <label class="form-label small mb-1">Estoque atual</label>
        <input type="number" name="estoque_atual" class="form-control" value="{{ produto.estoque_atual }}">
      </div>
    {% else %}
      <div class="col-6 col-md-3">
        <label class="form-label small mb-1">Estoque inicial</label>
        <input type="number" name="estoque_inicial" class="form-control" value="0">
      </div>
    {% endif %}

    <div class="col-12 d-flex justify-content-between mt-2">
      <a href="{{ url_for('lista_produtos') }}" class="btn btn-outline-light btn-sm">Voltar</a>
      <button type="submit" class="btn btn-soft">{{ 'Salvar alterações' if produto else 'Cadastrar produto' }}</button>
    </div>
  </form>
</div>
{% endblock %}
