{% extends "base.html" %}

{% if produto %}
  {% set page_title_txt = 'Editar produto' %}
  {% set icon_class = 'bi-pencil-square' %}
{% else %}
  {% set page_title_txt = 'Novo produto' %}
  {% set icon_class = 'bi-plus-circle' %}
{% endif %}

{% block title %}{{ page_title_txt }} • MetriFy{% endblock %}
{% block page_icon %}<i class="bi {{ icon_class }} text-primary"></i>{% endblock %}
{% block page_title %}{{ page_title_txt }}{% endblock %}

{% block content %}
<div class="card-glass">
  <div class="card-glass-header">
    <div class="card-glass-title">
      <i class="bi bi-box-seam"></i> Dados do produto
    </div>
  </div>

  <form method="post">
    <div class="row g-3">
      <div class="col-12 col-md-6">
        <label class="form-label" for="nome">Nome</label>
        <input
          type="text"
          class="form-control"
          id="nome"
          name="nome"
          required
          value="{{ produto.nome if produto else '' }}"
        >
      </div>
      <div class="col-12 col-md-3">
        <label class="form-label" for="sku">SKU</label>
        <input
          type="text"
          class="form-control"
          id="sku"
          name="sku"
          value="{{ produto.sku if produto else '' }}"
        >
      </div>
      <div class="col-12 col-md-3">
        <label class="form-label" for="custo_unitario">Custo unitário (R$)</label>
        <input
          type="number"
          step="0.01"
          class="form-control"
          id="custo_unitario"
          name="custo_unitario"
          required
          value="{{ '%.2f'|format(produto.custo_unitario) if produto else '' }}"
        >
      </div>
      <div class="col-12 col-md-3">
        <label class="form-label" for="preco_venda_sugerido">Preço sugerido (R$)</label>
        <input
          type="number"
          step="0.01"
          class="form-control"
          id="preco_venda_sugerido"
          name="preco_venda_sugerido"
          required
          value="{{ '%.2f'|format(produto.preco_venda_sugerido) if produto else '' }}"
        >
      </div>

      {% if produto %}
        <div class="col-12 col-md-3">
          <label class="form-label" for="estoque_atual">Estoque atual</label>
          <input
            type="number"
            class="form-control"
            id="estoque_atual"
            name="estoque_atual"
            required
            value="{{ produto.estoque_atual }}"
          >
        </div>
      {% else %}
        <div class="col-12 col-md-3">
          <label class="form-label" for="estoque_inicial">Estoque inicial</label>
          <input
            type="number"
            class="form-control"
            id="estoque_inicial"
            name="estoque_inicial"
            value="0"
          >
        </div>
      {% endif %}
    </div>

    <div class="mt-3 d-flex gap-2">
      <button type="submit" class="btn btn-primary">
        <i class="bi bi-check2-circle"></i> Salvar
      </button>
      <a href="{{ url_for('lista_produtos') }}" class="btn btn-outline-light">
        <i class="bi bi-arrow-left"></i> Voltar
      </a>
    </div>
  </form>
</div>
{% endblock %}
